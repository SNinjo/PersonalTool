{"version":3,"file":"component---src-pages-paint-index-tsx-956c53597d5c09773455.js","mappings":"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","sources":["webpack://SNinjo Tool/./src/pages/Paint/index.module.scss","webpack://SNinjo Tool/./src/pages/Paint/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport var Link = \"index-module--Link--c63a6\";\nexport var div = \"index-module--div--eb674\";\nexport var image = \"index-module--image--6d14f\";\nexport var picker = \"index-module--picker--eecb5\";\nexport var toolbar = \"index-module--toolbar--60315\";","import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { ChromePicker } from 'react-color';\r\nimport { PageProps } from 'gatsby';\r\nimport { StaticImage } from 'gatsby-plugin-image';\r\n\r\nimport { Position, Size } from '../../tools/Outward';\r\nimport { copyFile, getFile } from '../../tools/Image';\r\nimport NumberPicker from '../../components/NumberPicker';\r\nimport Layout from '../../components/Layout';\r\nimport SEO from '../../components/SEO';\r\nimport * as style from './index.module.scss';\r\n\r\n\r\nconst Paint = () => {\r\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\r\n\tconst [canvasSize, setCanvasSize] = useState(new Size());\r\n\tuseEffect(() => {\r\n\t\tif (refCanvas.current) {\r\n\t\t\tsetCanvasSize(new Size(refCanvas.current.offsetWidth, refCanvas.current.offsetHeight));\r\n\t\t}\r\n\t}, [refCanvas]);\r\n\r\n\tconst getDataUrl = (): string => {\r\n\t\treturn refCanvas.current!.toDataURL('image/png');\r\n\t}\r\n\tconst getContext = (): CanvasRenderingContext2D => {\r\n\t\tconst canvasElement = refCanvas.current as HTMLCanvasElement;\r\n\t\treturn canvasElement.getContext('2d') as CanvasRenderingContext2D;\r\n\t}\r\n\tconst clearCanvas = () => {\r\n\t\tconst canvasElement = refCanvas.current as HTMLCanvasElement;\r\n\t\tconst context = getContext();\r\n\t\tcontext.clearRect(0, 0, canvasElement.width, canvasElement.height);\r\n\t}\r\n\t\r\n\r\n\tconst [isLeftMousePressed, setLeftMousePressingState] = useState(false);\r\n\tconst [lastPosition, setLastPosition] = useState(new Position());\r\n\tconst getRelativePosition = (position: Position): Position => {\r\n\t\tconst { left, top } = refCanvas.current!.getBoundingClientRect();\r\n\t\tconst newPosition = position.clone();\r\n\t\tnewPosition.x -= left;\r\n\t\tnewPosition.y -= top;\r\n\t\treturn newPosition;\r\n\t}\r\n\t\r\n\r\n\tconst [lineWidth, setLineWidth] = useState(5);\r\n\tconst [lineColor, setLineColor] = useState('#FFFFFF');\r\n\tconst [isPickingWidth, setPickingWidthState] = useState(false);\r\n\tconst [isPickingColor, setPickingColorState] = useState(false);\r\n\r\n\r\n\tconst drawLine = (startPosition: Position, endPosition: Position) => {\r\n\t\tconst context = getContext();\r\n\t\tcontext.lineWidth = lineWidth;\r\n\t\tcontext.strokeStyle = lineColor;\r\n\t\tcontext.lineCap = 'round';\r\n\t\tcontext.lineJoin = 'round';\r\n\r\n\t\tcontext.beginPath();\r\n\t\tcontext.moveTo(startPosition.x, startPosition.y);\r\n\t\tcontext.lineTo(endPosition.x, endPosition.y);\r\n\t\tcontext.stroke();\r\n\t}\r\n\t\r\n\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<div\r\n\t\t\t\tclassName={style.div}\r\n\t\t\t>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tref={refCanvas}\r\n\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\twidth={canvasSize.width}\r\n\t\t\t\t\theight={canvasSize.height}\r\n\r\n\t\t\t\t\tonKeyDown={(event) => {\r\n\t\t\t\t\t\tswitch (event.key) {\r\n\t\t\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\t\t\tif (event.ctrlKey) copyFile(getFile(getDataUrl(), 'paint'));\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseDown={(event) => {\r\n\t\t\t\t\t\tsetLeftMousePressingState(true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst currentPosition = getRelativePosition(new Position(event.pageX, event.pageY));\r\n\t\t\t\t\t\tdrawLine(currentPosition, currentPosition);\r\n\t\t\t\t\t\tsetLastPosition(currentPosition);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMouseMove={(event) => {\r\n\t\t\t\t\t\tif (isLeftMousePressed) {\r\n\t\t\t\t\t\t\tconst currentPosition = getRelativePosition(new Position(event.pageX, event.pageY));\r\n\t\t\t\t\t\t\tdrawLine(lastPosition, currentPosition);\r\n\t\t\t\t\t\t\tsetLastPosition(currentPosition);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMouseUp={() => {\r\n\t\t\t\t\t\tsetLeftMousePressingState(false);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={style.toolbar}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonMouseDown={(event) => event.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{isPickingWidth?\r\n\t\t\t\t\t\t\t<NumberPicker\r\n\t\t\t\t\t\t\t\tclassName={style.picker}\r\n\t\t\t\t\t\t\t\ttext={'width'}\r\n\t\t\t\t\t\t\t\tnumber={lineWidth}\r\n\r\n\t\t\t\t\t\t\t\tonChange={(number) => setLineWidth(number)}\r\n\t\t\t\t\t\t\t/>:\r\n\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={isPickingWidth? style.selected : ''}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonClick={() => setPickingWidthState(value => !value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\tsrc='../../images/width.png'\r\n\t\t\t\t\t\t\t\talt='pick width'\r\n\t\t\t\t\t\t\t\ttitle='pick width'\r\n\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{isPickingColor?\r\n\t\t\t\t\t\t\t<ChromePicker\r\n\t\t\t\t\t\t\t\tclassName={style.picker}\r\n\r\n\t\t\t\t\t\t\t\tcolor={lineColor}\r\n\t\t\t\t\t\t\t\tonChange={(color) => {\r\n\t\t\t\t\t\t\t\t\tsetLineColor(color.hex);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>:\r\n\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={isPickingColor? style.selected : ''}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonClick={() => setPickingColorState(value => !value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\tsrc='../../images/colorPalette.png'\r\n\t\t\t\t\t\t\t\talt='pick color'\r\n\t\t\t\t\t\t\t\ttitle='pick color'\r\n\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => copyFile(getFile(getDataUrl(), 'paint'))}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\tsrc='../../images/copy.png'\r\n\t\t\t\t\t\t\t\talt='copy image'\r\n\t\t\t\t\t\t\t\ttitle='copy image'\r\n\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={clearCanvas}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\tsrc='../../images/ashcan.png'\r\n\t\t\t\t\t\t\t\talt='clear image'\r\n\t\t\t\t\t\t\t\ttitle='clear image'\r\n\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t);\r\n}\r\nexport default Paint;\r\n\r\n\r\nexport const Head: FC<PageProps> = ({ location }) => (\r\n\t<SEO\r\n\t\ttitle='Paint'\r\n\t\tpathname={location.pathname}\r\n\t/>\r\n)"],"names":["div","picker","toolbar","refCanvas","useRef","canvasSize","setCanvasSize","useState","Size","useEffect","current","offsetWidth","offsetHeight","getDataUrl","toDataURL","getContext","isLeftMousePressed","setLeftMousePressingState","lastPosition","setLastPosition","Position","getRelativePosition","position","left","top","getBoundingClientRect","newPosition","clone","x","y","lineWidth","setLineWidth","lineColor","setLineColor","isPickingWidth","setPickingWidthState","isPickingColor","setPickingColorState","drawLine","startPosition","endPosition","context","strokeStyle","lineCap","lineJoin","beginPath","moveTo","lineTo","stroke","React","Layout","className","style","ref","tabIndex","width","height","onKeyDown","event","key","ctrlKey","copyFile","getFile","onMouseDown","currentPosition","pageX","pageY","onMouseMove","onMouseUp","stopPropagation","NumberPicker","text","number","onChange","onClick","value","StaticImage","src","alt","title","loading","__imageData","ChromePicker","color","hex","canvasElement","clearRect","Head","_ref","location","SEO","pathname"],"sourceRoot":""}