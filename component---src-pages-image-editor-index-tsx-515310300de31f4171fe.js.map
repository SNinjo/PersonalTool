{"version":3,"file":"component---src-pages-image-editor-index-tsx-515310300de31f4171fe.js","mappings":"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","sources":["webpack://SNinjo Tool/./src/components/ImageLoader/index.module.scss","webpack://SNinjo Tool/./src/components/ImageLoader/index.tsx","webpack://SNinjo Tool/./src/tools/Element/index.ts","webpack://SNinjo Tool/./src/pages/ImageEditor/index.module.scss","webpack://SNinjo Tool/./src/pages/ImageEditor/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport var div = \"index-module--div--cd131\";\nexport var dragging = \"index-module--dragging--09847\";\nexport var show = \"index-module--show--38579\";\nexport var transparent = \"index-module--transparent--7ad46\";","import React, { FC, useEffect, useRef, useState } from 'react';\r\n\r\nimport { copyFile, getDataUrl, getFile, isDataUrl } from '../../tools/Image';\r\nimport * as style from './index.module.scss';\r\n\r\n\r\nexport interface Image {\r\n\ttype: string,\r\n\twidth: number,\r\n\theight: number,\r\n\tdataUrl: string,\r\n\tfile: File,\r\n}\r\ntype DataProps = {\r\n\twidth?: string,\r\n\theight?: string,\r\n\r\n\tonChange?: (image: Image) => void,\r\n}\r\n\r\nconst ImageLoader: FC<DataProps> = ({ width, height, onChange }) => {\r\n\tconst refInput = useRef<HTMLInputElement>(null);\r\n\tconst refImage = useRef<HTMLImageElement>(null);\r\n\tconst [isDragging, setDraggingState] = useState(false);\r\n\r\n\t\r\n\tconst [file, setFile] = useState<File>();\r\n\tconst [source, setSource] = useState('');\r\n\r\n\tconst readFile = async () => {\r\n\t\tif (file) {\r\n\t\t \tsetSource(await getDataUrl(file));\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\treadFile();\r\n\t}, [file]);\r\n\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${style.div} ${isDragging? style.dragging : ''}`}\r\n\t\t\tstyle={{\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t}}\r\n\t\t\ttabIndex={0}\r\n\r\n\r\n\t\t\tonDragEnter={() => setDraggingState(true)}\r\n\t\t\tonDragLeave={() => setDraggingState(false)}\r\n\t\t\tonDragOver={(event) => event.preventDefault()}\r\n\t\t\tonDrop={(event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tsetDraggingState(false);\r\n\t\t\t\tsetFile(event.dataTransfer.files[0]);\r\n\t\t\t}}\r\n\r\n\t\t\tonKeyDown={(event) => {\r\n\t\t\t\tif (event.ctrlKey && event.key === 'c' && file) {\r\n\t\t\t\t\tcopyFile(file);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tonPaste={(event) => {\r\n\t\t\t\tconst text = event.clipboardData.getData('Text');\r\n\t\t\t\tif (text === '') {\r\n\t\t\t\t\tsetFile(event.clipboardData.files[0]);\r\n\t\t\t\t} else if (isDataUrl(text)) {\r\n\t\t\t\t\tsetFile(getFile(text));\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('Failed to parse data in the clipboard...');\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\tref={refInput}\r\n\t\t\t\ttype='file'\r\n\t\t\t\taccept=\"image/*\"\r\n\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tconst fileList = event.target.files;\r\n\t\t\t\t\tif (fileList && (fileList.length !== 0)) {\r\n\t\t\t\t\t\tsetFile(fileList[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<label\r\n\t\t\t\tclassName={source? '' : style.show}\r\n\t\t\t>\r\n\t\t\t\t<span>&gt; Paste or drop image here &lt;</span>\r\n\t\t\t</label>\r\n\r\n\t\t\t<img\r\n\t\t\t\tref={refImage}\r\n\t\t\t\tclassName={`${source? style.show : ''} ${isDragging? style.transparent : ''}`}\r\n\t\t\t\tsrc={source}\r\n\r\n\t\t\t\tonLoad={() => {\r\n\t\t\t\t\tif (file && onChange) {\r\n\t\t\t\t\t\tonChange({\r\n\t\t\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\t\t\twidth: refImage.current!.naturalWidth,\r\n\t\t\t\t\t\t\theight: refImage.current!.naturalHeight,\r\n\t\t\t\t\t\t\tdataUrl: source,\r\n\t\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclassName={source? style.transparent : ''}\r\n\r\n\t\t\t\tonClick={() => refInput.current!.click()}\r\n\t\t\t>\r\n\t\t\t\tUpload\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default ImageLoader;","export function getNaturalHeight(text: string, fontSize: number, font = 'Arial'): number {\r\n\tif (text === '') text = 'T h j g 0';\r\n\tconst divElement = document.createElement('div');\r\n\tdivElement.innerText = text;\r\n\tdivElement.setAttribute('style', `\r\n\t\tposition: fixed;\r\n\t\tright: -10px;\r\n\t\ttop: 0;\r\n\r\n\t\tdisplay: block;\r\n\t\tfont-size: ${fontSize}px;\r\n\t\tfont-family: ${font};\r\n\t`);\r\n\tdocument.body.append(divElement);\r\n\tconst { height } = divElement.getBoundingClientRect();\r\n\tdivElement.remove();\r\n\treturn height;\r\n}","// extracted by mini-css-extract-plugin\nexport var Link = \"index-module--Link--25c4d\";\nexport var div = \"index-module--div--e2983\";\nexport var editArea = \"index-module--editArea--3d69b\";\nexport var image = \"index-module--image--ac411\";\nexport var picker = \"index-module--picker--fde63\";\nexport var previewLine = \"index-module--previewLine--61209\";\nexport var previewRectangle = \"index-module--previewRectangle--10e9d\";\nexport var previewText = \"index-module--previewText--3ddc8\";\nexport var screen = \"index-module--screen--cd222\";\nexport var selected = \"index-module--selected--15500\";\nexport var toolbar = \"index-module--toolbar--c2e90\";","import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { ChromePicker } from 'react-color';\r\nimport { PageProps } from 'gatsby';\r\nimport { StaticImage } from 'gatsby-plugin-image';\r\n\r\nimport { Position, Size } from '../../tools/Outward';\r\nimport { getNaturalHeight } from '../../tools/Element';\r\nimport { copyFile, getFile, getMime } from '../../tools/Image';\r\nimport ImageLoader from '../../components/ImageLoader';\r\nimport NumberPicker from '../../components/NumberPicker';\r\nimport Layout from '../../components/Layout';\r\nimport SEO from '../../components/SEO';\r\nimport * as style from './index.module.scss';\r\n\r\n\r\ntype EditMode = '' | 'cursor' | 'rectangle' | 'line' | 'text';\r\n\r\nconst ImageParser = () => {\r\n\tconst [windowSize, setWindowSize] = useState(new Size(0, 0));\r\n\tuseEffect(() => {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tsetWindowSize(new Size(window.innerWidth, window.innerHeight));\r\n\t\t}\r\n\t\t\r\n\t\tconst resizeWindow = () => setWindowSize(new Size(window.innerWidth, window.innerHeight));\r\n\t\twindow.addEventListener('resize', () => resizeWindow);\r\n\t\treturn () => window.removeEventListener('resize', () => resizeWindow);\r\n\t}, []);\r\n\r\n\r\n\tconst refScreen = useRef<HTMLDivElement>(null);\r\n\tconst refEditArea = useRef<HTMLDivElement>(null);\r\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\r\n\tconst [originalDataUrl, setOriginalDataUrl] = useState<string>('');\r\n\tconst [dataUrl, setDataUrl] = useState<string>('');\r\n\tuseEffect(() => {\r\n\t\tif (dataUrl) {\r\n\t\t\tconst domImage = new Image();\r\n\t\t\tdomImage.setAttribute('src', dataUrl);\r\n\t\t\tdomImage.addEventListener('load', () => {\r\n\t\t\t\tconst domCanvas = refCanvas.current as HTMLCanvasElement;\r\n\t\t\t\tdomCanvas.width = domImage.width;\r\n\t\t\t\tdomCanvas.height = domImage.height;\r\n\t\t\t\tdomCanvas.getContext('2d')!.drawImage(domImage, 0, 0);\r\n\t\t\t});\r\n\r\n\t\t\trefCanvas.current!.getContext('2d')!.drawImage(domImage, 0, 0);\r\n\t\t\trefEditArea.current!.focus();\r\n\t\t}\r\n\t}, [dataUrl]);\r\n\r\n\t\r\n\tconst [isLeftMousePressed, setLeftMousePressingState] = useState(false);\r\n\tconst [pressedPosition, setPressedPosition] = useState(new Position());\r\n\tconst [currentPosition, setCurrentPosition] = useState(new Position());\r\n\r\n\t\r\n\tconst [canvasSize, setCanvasSize] = useState(new Size());\r\n\tconst [scrollbarPosition, setScrollbarPosition] = useState(new Position());\r\n\tuseEffect(() => {\r\n\t\tif (refScreen.current) {\r\n\t\t\trefScreen.current.scrollLeft = scrollbarPosition.x;\r\n\t\t\trefScreen.current.scrollTop = scrollbarPosition.y;\r\n\t\t}\r\n\t}, [scrollbarPosition]);\r\n\r\n\r\n\tconst [isScreenMoving, setScreenMovingState] = useState(false);\r\n\tconst [originalScrollbarPosition, setOriginalScrollbarPosition] = useState(new Position());\r\n\tuseEffect(() => {\r\n\t\tif (isLeftMousePressed && isScreenMoving) {\r\n\t\t\tconst newScrollbarPosition = originalScrollbarPosition.add(currentPosition.add(pressedPosition.multiply(-1)).multiply(-1));\r\n\t\t\tsetScrollbarPosition(Position.getPositive(newScrollbarPosition));\r\n\t\t}\r\n\t}, [pressedPosition, currentPosition, isLeftMousePressed, isScreenMoving]);\r\n\r\n\r\n\tconst [editMode, setEditMode] = useState<EditMode>('cursor');\r\n\tconst [isDrawing, setDrawingState] = useState(false);\r\n\r\n\tconst [lineWidth, setLineWidth] = useState(10);\r\n\tconst [lineColor, setLineColor] = useState('#FF0000');\r\n\tconst [isPickingWidth, setPickingWidthState] = useState(false);\r\n\tconst [isPickingColor, setPickingColorState] = useState(false);\r\n\r\n\tconst refPreviewText = useRef<HTMLDivElement>(null);\r\n\tconst [previewText, setPreviewText] = useState('');\r\n\tconst clearPreviewText = () => {\r\n\t\tsetPreviewText('');\r\n\t\trefPreviewText.current!.innerText = '';\r\n\t}\r\n\r\n\tconst [previewAngle, setPreviewSetAngle] = useState(0);\r\n\tconst [previewPosition, setPreviewPosition] = useState(new Position());\r\n\tconst [previewSize, setPreviewSize] = useState(new Size());\r\n\tuseEffect(() => {\r\n\t\tsetPreviewSetAngle(0);\r\n\t\tsetPreviewPosition(new Position());\r\n\t\tsetPreviewSize(new Size());\r\n\r\n\t\tif (editMode !== '') {\r\n\t\t\tsetScreenMovingState(false);\r\n\t\t}\r\n\t}, [editMode]);\r\n\tuseEffect(() => {\r\n\t\tif (!refCanvas.current) return;\r\n\t\tif (!isDrawing) {\r\n\t\t\tconst { left, top } = refCanvas.current.getBoundingClientRect();\r\n\t\t\tconst context = refCanvas.current.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n\t\t\tswitch(editMode) {\r\n\t\t\t\tcase 'line':\r\n\t\t\t\t\tcontext.strokeStyle = lineColor;\r\n\t\t\t\t\tcontext.lineWidth = lineWidth;\r\n\t\t\t\t\tcontext.moveTo((pressedPosition.x - left), (pressedPosition.y - top));\r\n\t\t\t\t\tcontext.lineTo((currentPosition.x - left), (currentPosition.y - top));\r\n\t\t\t\t\tcontext.stroke();\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tcase 'rectangle':\r\n\t\t\t\t\tcontext.strokeStyle = lineColor;\r\n\t\t\t\t\tcontext.lineWidth = lineWidth;\r\n\t\t\t\t\tcontext.strokeRect(\r\n\t\t\t\t\t\t(previewPosition.x - left + (lineWidth / 2)),\r\n\t\t\t\t\t\t(previewPosition.y - top + (lineWidth / 2)),\r\n\t\t\t\t\t\t(previewSize.width - lineWidth),\r\n\t\t\t\t\t\t(previewSize.height - lineWidth)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'text':\r\n\t\t\t\t\tcontext.fillStyle = lineColor;\r\n\t\t\t\t\tcontext.font = `${lineWidth}px Arial`;\r\n\t\t\t\t\tcontext.fillText(previewText, (previewPosition.x - left), (previewPosition.y - top));\r\n\t\t\t\t\tclearPreviewText();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tsetDataUrl(refCanvas.current.toDataURL(getMime(dataUrl)));\r\n\t\t\trefCanvas.current.focus();\r\n\t\t}\r\n\t}, [isDrawing]);\r\n\tuseEffect(() => {\r\n\t\tswitch(editMode) {\r\n\t\t\tcase 'line':\r\n\t\t\t\tconst centerPosition = Position.getCenter(pressedPosition, currentPosition);\r\n\t\t\t\tconst distance = Position.getDistance(pressedPosition, currentPosition);\r\n\t\t\t\tsetPreviewSetAngle(Position.getAngel(pressedPosition, currentPosition));\r\n\t\t\t\tsetPreviewPosition(  centerPosition.add(new Position((distance / 2), (lineWidth / 2)).multiply(-1))  );\r\n\t\t\t\tsetPreviewSize(new Size(distance, lineWidth));\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'rectangle':\r\n\t\t\t\tsetPreviewPosition(new Position(\r\n\t\t\t\t\t((pressedPosition.x < currentPosition.x)? pressedPosition.x : currentPosition.x),\r\n\t\t\t\t\t((pressedPosition.y < currentPosition.y)? pressedPosition.y : currentPosition.y)\r\n\t\t\t\t));\r\n\t\t\t\tsetPreviewSize(new Size(\r\n\t\t\t\t\tMath.abs(pressedPosition.x - currentPosition.x),\r\n\t\t\t\t\tMath.abs(pressedPosition.y - currentPosition.y)\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [pressedPosition, currentPosition]);\r\n\r\n\r\n\tconst [cssCursor, setCssCursor] = useState('auto');\r\n\tuseEffect(() => {\r\n\t\tswitch (isScreenMoving? '' : editMode) {\r\n\t\t\tcase 'cursor':\r\n\t\t\t\tsetCssCursor('auto');\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase '':\r\n\t\t\t\tif (isLeftMousePressed) setCssCursor('grabbing');\r\n\t\t\t\telse setCssCursor('grab');\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'cursor':\r\n\t\t\t\tsetCssCursor('auto');\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'rectangle':\r\n\t\t\tcase 'line':\r\n\t\t\t\tsetCssCursor('cell');\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'text':\r\n\t\t\t\tsetCssCursor('text');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [isLeftMousePressed, isDrawing, isScreenMoving, editMode]);\r\n\r\n\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<div\r\n\t\t\t\tclassName={style.div}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={refScreen}\r\n\t\t\t\t\tclassName={style.screen}\r\n\t\t\t\t>\r\n\t\t\t\t\t{dataUrl?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tref={refEditArea}\r\n\t\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: ((windowSize.width * 2) + canvasSize.width),\r\n\t\t\t\t\t\t\t\t\theight: ((windowSize.width * 2) + canvasSize.height),\r\n\r\n\t\t\t\t\t\t\t\t\tcursor: cssCursor,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={style.editArea}\r\n\r\n\t\t\t\t\t\t\t\tonKeyDown={(event) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('keydown', event)//\r\n\t\t\t\t\t\t\t\t\tswitch (event.key) {\r\n\t\t\t\t\t\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\t\t\t\t\t\tif (event.ctrlKey) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('copy', dataUrl)//\r\n\t\t\t\t\t\t\t\t\t\t\t\tcopyFile(getFile(dataUrl, 'image'));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'Control':\r\n\t\t\t\t\t\t\t\t\t\t\tsetScreenMovingState(true);\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonKeyUp={(event) => {\r\n\t\t\t\t\t\t\t\t\tif (event.key === 'Control') {\r\n\t\t\t\t\t\t\t\t\t\tsetScreenMovingState(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\t\tonMouseDown={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetLeftMousePressingState(true);\r\n\t\t\t\t\t\t\t\t\tsetPressedPosition(new Position(event.clientX, event.clientY));\r\n\t\t\t\t\t\t\t\t\tsetCurrentPosition(new Position(event.clientX, event.clientY));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (isScreenMoving) {\r\n\t\t\t\t\t\t\t\t\t\tsetOriginalScrollbarPosition(scrollbarPosition);\r\n\t\t\t\t\t\t\t\t\t} else if (isDrawing) {\r\n\t\t\t\t\t\t\t\t\t\tsetDrawingState(false);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (editMode === 'text') {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\t\t\tsetDrawingState(true);\r\n\t\t\t\t\t\t\t\t\t\tsetPreviewPosition(new Position(event.clientX, event.clientY));\r\n\t\t\t\t\t\t\t\t\t\tsetPreviewSize(new Size());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonMouseMove={(event) => {\r\n\t\t\t\t\t\t\t\t\tif (isScreenMoving || isDrawing) {\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPosition(new Position(event.clientX, event.clientY));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonMouseUp={() => {\r\n\t\t\t\t\t\t\t\t\tsetLeftMousePressingState(false);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (editMode === 'text') {\r\n\t\t\t\t\t\t\t\t\t\trefPreviewText.current!.focus();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetDrawingState(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<canvas\r\n\t\t\t\t\t\t\t\t\tref={refCanvas}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tleft: windowSize.width,\r\n\t\t\t\t\t\t\t\t\t\ttop: windowSize.height,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tleft: (previewPosition.x + 0.5),\r\n\t\t\t\t\t\t\t\t\t\ttop: (previewPosition.y + 0.5),\r\n\t\t\t\t\t\t\t\t\t\twidth: previewSize.width,\r\n\t\t\t\t\t\t\t\t\t\theight: previewSize.height,\r\n\r\n\t\t\t\t\t\t\t\t\t\tborderWidth: (lineWidth),\r\n\t\t\t\t\t\t\t\t\t\tborderColor: lineColor,\r\n\t\t\t\t\t\t\t\t\t\tdisplay: (isDrawing && (editMode === 'rectangle'))? 'block' : 'none',\r\n\t\t\t\t\t\t\t\t\t\tzIndex: (isDrawing && (editMode === 'rectangle'))? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={style.previewRectangle}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tleft: (previewPosition.x + 0.5),\r\n\t\t\t\t\t\t\t\t\t\ttop: (previewPosition.y + 0.5),\r\n\t\t\t\t\t\t\t\t\t\twidth: previewSize.width,\r\n\t\t\t\t\t\t\t\t\t\theight: previewSize.height,\r\n\r\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: lineColor,\r\n\t\t\t\t\t\t\t\t\t\ttransform: `rotate(${previewAngle}deg)`,\r\n\t\t\t\t\t\t\t\t\t\tdisplay: (isDrawing && (editMode === 'line'))? 'block' : 'none',\r\n\t\t\t\t\t\t\t\t\t\tzIndex: (isDrawing && (editMode === 'line'))? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={style.previewLine}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tref={refPreviewText}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tleft: (previewPosition.x + 0.5),\r\n\t\t\t\t\t\t\t\t\t\ttop: (previewPosition.y - getNaturalHeight(previewText, lineWidth) + (lineWidth / 4.5) + 1.5),\r\n\r\n\t\t\t\t\t\t\t\t\t\tcolor: lineColor,\r\n\t\t\t\t\t\t\t\t\t\tfontSize: lineWidth,\r\n\t\t\t\t\t\t\t\t\t\tdisplay: (isDrawing && (editMode === 'text'))? 'block' : 'none',\r\n\t\t\t\t\t\t\t\t\t\tzIndex: (isDrawing && (editMode === 'text'))? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={style.previewText}\r\n\t\t\t\t\t\t\t\t\tcontentEditable\r\n\r\n\t\t\t\t\t\t\t\t\tonBlur={() => setDrawingState(false)}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tif (event.key === 'Enter') {\r\n\t\t\t\t\t\t\t\t\t\t\tsetDrawingState(false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonInput={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tconst divElement = event.target as HTMLDivElement;\r\n\t\t\t\t\t\t\t\t\t\tsetPreviewText(divElement.innerText);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={style.toolbar}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tonMouseDown={(event) => event.stopPropagation()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={(editMode === 'cursor')? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditMode('cursor')}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/cursor.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='cursor'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='cursor'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={(editMode === 'rectangle')? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditMode('rectangle')}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/rectangle.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='draw rectangle'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='draw rectangle'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={(editMode === 'line')? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditMode('line')}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/line.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='draw line'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='draw line'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={(editMode === 'text')? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditMode('text')}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/text.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='type text'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='type text'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={isScreenMoving? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEditMode('');\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetScreenMovingState(true);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/moving.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='move screen'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='move screen'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{isPickingWidth?\r\n\t\t\t\t\t\t\t\t\t\t\t<NumberPicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.picker}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={'width'}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnumber={lineWidth}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(number) => setLineWidth(number)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>:\r\n\t\t\t\t\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={isPickingWidth? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setPickingWidthState(value => !value)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/width.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='pick width'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='pick width'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{isPickingColor?\r\n\t\t\t\t\t\t\t\t\t\t\t<ChromePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.picker}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={lineColor}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(color) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLineColor(color.hex);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>:\r\n\t\t\t\t\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={isPickingColor? style.selected : ''}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setPickingColorState(value => !value)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/colorPalette.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='pick color'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='pick color'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => copyFile(getFile(dataUrl, 'image'))}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/copy.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='copy image'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='copy image'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setDataUrl(originalDataUrl)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<StaticImage\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={style.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc='../../images/ashcan.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\talt='clear image'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='clear image'\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading='eager'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>:\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t<ImageLoader\r\n\t\t\t\t\t\t\tonChange={(image) => {\r\n\t\t\t\t\t\t\t\tsetOriginalDataUrl(image.dataUrl);\r\n\t\t\t\t\t\t\t\tsetDataUrl(image.dataUrl);\r\n\t\t\t\t\t\t\t\tsetCanvasSize(new Size(image.width, image.height));\r\n\t\t\t\t\t\t\t\tsetScrollbarPosition(new Position((windowSize.width - 50), (windowSize.height - 50)));\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t);\r\n}\r\nexport default ImageParser;\r\n\r\n\r\nexport const Head: FC<PageProps> = ({ location }) => (\r\n\t<SEO\r\n\t\ttitle='Image Editor'\r\n\t\tpathname={location.pathname}\r\n\t/>\r\n)"],"names":["show","transparent","_ref","width","height","onChange","refInput","useRef","refImage","isDragging","setDraggingState","useState","file","setFile","source","setSource","useEffect","async","getDataUrl","readFile","React","className","style","tabIndex","onDragEnter","onDragLeave","onDragOver","event","preventDefault","onDrop","dataTransfer","files","onKeyDown","ctrlKey","key","copyFile","onPaste","text","clipboardData","getData","isDataUrl","getFile","alert","ref","type","accept","fileList","target","length","src","onLoad","current","naturalWidth","naturalHeight","dataUrl","onClick","click","getNaturalHeight","fontSize","font","divElement","document","createElement","innerText","setAttribute","body","append","getBoundingClientRect","remove","picker","selected","windowSize","setWindowSize","Size","window","innerWidth","innerHeight","resizeWindow","addEventListener","removeEventListener","refScreen","refEditArea","refCanvas","originalDataUrl","setOriginalDataUrl","setDataUrl","domImage","Image","domCanvas","getContext","drawImage","focus","isLeftMousePressed","setLeftMousePressingState","pressedPosition","setPressedPosition","Position","currentPosition","setCurrentPosition","canvasSize","setCanvasSize","scrollbarPosition","setScrollbarPosition","scrollLeft","x","scrollTop","y","isScreenMoving","setScreenMovingState","originalScrollbarPosition","setOriginalScrollbarPosition","newScrollbarPosition","add","multiply","getPositive","editMode","setEditMode","isDrawing","setDrawingState","lineWidth","setLineWidth","lineColor","setLineColor","isPickingWidth","setPickingWidthState","isPickingColor","setPickingColorState","refPreviewText","previewText","setPreviewText","previewAngle","setPreviewSetAngle","previewPosition","setPreviewPosition","previewSize","setPreviewSize","left","top","context","strokeStyle","moveTo","lineTo","stroke","strokeRect","fillStyle","fillText","toDataURL","getMime","centerPosition","getCenter","distance","getDistance","getAngel","Math","abs","cssCursor","setCssCursor","Layout","cursor","console","log","onKeyUp","onMouseDown","clientX","clientY","stopPropagation","onMouseMove","onMouseUp","borderWidth","borderColor","display","zIndex","backgroundColor","transform","color","contentEditable","onBlur","onInput","StaticImage","alt","title","loading","__imageData","NumberPicker","number","value","ChromePicker","hex","ImageLoader","image","Head","location","SEO","pathname"],"sourceRoot":""}